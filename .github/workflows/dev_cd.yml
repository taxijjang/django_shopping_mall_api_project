name: django dev build
on:
  push:
    branches:
      - dev

jobs:
  django-build-ssh-action:
    runs-on: ubuntu-latest
    name: Build
    steps:
      - name: SSH Remote Commands
        uses: appleboy/ssh-action@master
        with:
          host: ${{ secrets.HOST }}
          username: ${{ secrets.USERNAME_NOT_ROOT }}
          password: ${{ secrets.PASSWORD }}
          port: ${{ secrets.PORT }}
          timeout: 40s
          script: |
            ls -all
            cd personal/django_shopping_mall_api_project/
            git config user.name taxijjang
            git config user.email gw9122@naver.com
            git pull origin dev
            docker-compose up -d --build